{"version":3,"file":"leaflet-routing-openroute.js","sources":["../src/leaflet-routing-openroute.js"],"sourcesContent":["/* @preserve\n *\n * Leaflet Routing Machine / OpenRoute Service\n * Version 0.1.9\n * \n * Extends Leaflet Routing Machine with support for OpenRoute Service\n * https://openrouteservice.org/dev/#/api-docs/v2/directions/\n * \n * ## Dependancies:\n * - Leaflet Routing Machine http://www.liedman.net/leaflet-routing-machine/\n * \n * This plugin is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as \n * published by the Free Software Foundation, either version 3 of the \n * License, or (at your option) any later version.\n * \n * This plugin is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. \n * See the GNU Affero General Public License for more details.\n * \n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <https://www.gnu.org/licenses/>\n * \n * Copyright (c) 20Z0 Gérald Niel (https://framagit.org/gegeweb)\n * \n * @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3-or-later\n */\n\n(function(factory) {\n\t// Packaging/modules magic dance\n\tvar L;\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['leaflet'], factory);\n\t} else if (typeof module !== 'undefined') {\n\t\t// Node/CommonJS\n\t\tL = require('leaflet');\n\t\tmodule.exports = factory(L);\n\t} else {\n\t\t// Browser globals\n\t\tif (typeof window.L === 'undefined')\n\t\t\tthrow 'Leaflet must be loaded first';\n\t\tif (typeof window.L.Routing === 'undefined')\n\t\t\tthrow 'Leaflet Routing Machine must be loaded first'\n\t\tfactory(window.L);\n\t}\n}(function(L) {\n\t'use strict';\n\tL.Routing = L.Routing || {};\n\tL.routing = L.routing || {};\n\n\tL.Routing.OpenRouteService = L.Class.extend({\n\t\tversion: '0.1.9',\n\t\toptions: {\n\t\t\t\"timeout\": 30 * 1000, // 30\"\n\t\t\t\"host\": \"https://api.openrouteservice.org\",\n\t\t\t\"service\": \"directions\",\n\t\t\t\"api_version\": \"v2\",\n\t\t\t\"profile\": \"cycling-road\",\n\t\t\t\"routingQueryParams\": {\n\t\t\t\t\"attributes\": [\n\t\t\t\t\t\"avgspeed\",\n\t\t\t\t\t\"percentage\"\n\t\t\t\t],\n\t\t\t\t\"language\": \"fr-fr\",\n\t\t\t\t\"maneuvers\": \"true\",\n\t\t\t\t\"preference\": \"recommended\",\n\t\t\t}\n\t\t},\n\n\t\tinitialize: function(token, options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tthis._token = token;\n\t\t},\n\n\t\troute: function(waypoints, callback, context, options) {\n\n\t\t\tlet timedOut = false,\n\t\t\t\twps = [],\n\t\t\t\ttimer,\n\t\t\t\tcoords = [],\n\t\t\t\topts = this.options || {},\n\t\t\t\tparams = opts.routingQueryParams || {};\n\n\t\t\ttimer = setTimeout(function() {\n\t\t\t\ttimedOut = true;\n\t\t\t\tcallback.call(context || callback, {\n\t\t\t\t\tstatus: -1,\n\t\t\t\t\tmessage: 'OpenRoute Service request timed out.'\n\t\t\t\t});\n\t\t\t}, opts.timeout);\n\n\n\t\t\t// Create a copy of the waypoints, since they\n\t\t\t// might otherwise be asynchronously modified while\n\t\t\t// the request is being processed.\n\t\t\twaypoints.forEach((wp) => {\n\t\t\t\tlet c = wp.latLng;\n\t\t\t\twps.push({\n\t\t\t\t\tlatLng: wp.latLng,\n\t\t\t\t\tname: wp.name,\n\t\t\t\t\toptions: wp.options\n\t\t\t\t});\n\t\t\t\t// Array of waypoints [lng, lat] to be passed to\n\t\t\t\t// the route request \n\t\t\t\tcoords.push([c.lng, c.lat]);\n\t\t\t});\n\t\t\t// Add the array of coords (wp) to the requests\n\t\t\tL.extend(params, { coordinates: coords });\n\n\t\t\tlet request = this._requestPost(params);\n\n\t\t\trequest.then(datas => {\n\t\t\t\t\tif (!timedOut) {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\tif (datas.error) {\n\t\t\t\t\t\t\tlet err = datas.error;\n\t\t\t\t\t\t\tdatas.response.then(resp => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (resp) {\n\t\t\t\t\t\t\t\t\t\tresp = JSON.parse(resp);\n\t\t\t\t\t\t\t\t\t\terr.status = resp.error.code;\n\t\t\t\t\t\t\t\t\t\terr.message = resp.error.message;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcallback.call(context || callback, {\n\t\t\t\t\t\t\t\t\t\tstatus: err.status || -1,\n\t\t\t\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (opts.format == 'gpx')\n\t\t\t\t\t\t\t\tcallback.call(context || callback, datas);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis._routeDone(datas, wps, callback, context)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tif (!timedOut) {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\tcallback.call(context || callback, {\n\t\t\t\t\t\t\tstatus: err.status || -1,\n\t\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_requestPost(params) {\n\n\t\t\tlet url = this._buildUrl(),\n\t\t\t\theaders = this._setHeaders(),\n\t\t\t\topts = {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: headers,\n\t\t\t\t\tbody: JSON.stringify(params)\n\t\t\t\t},\n\t\t\t\tformat = this.options.format;\n\n\t\t\tconst promise = fetch(url, opts)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tif (format == 'gpx') {\n\t\t\t\t\t\t\treturn response.text();\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet status = response.status,\n\t\t\t\t\t\t\tmessage = response.statusText,\n\t\t\t\t\t\t\terr = new Error(message);\n\t\t\t\t\t\terr.status = status;\n\t\t\t\t\t\treturn { error: err, response: response.text() }\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\n\t\t/**\n\t\t * Build the Url of service\n\t\t * by default if not defined in opts :\n\t\t * // https://api.openrouteservice.org/v2/directions/cyling_road\n\t\t * \n\t\t * @param {Object} opts (optional)\n\t\t * \n\t\t * @return {String} url\n\t\t */\n\t\t_buildUrl: function(opts) {\n\t\t\topts = opts || this.options;\n\t\t\tlet url = opts.host || \"https://api.openrouteservice.org\";\n\t\t\turl += `/${(opts.api_version || \"v2\")}`;\n\t\t\turl += `/${(opts.service || \"directions\")}`;\n\t\t\turl += `/${(opts.profile || \"cycling_road\")}`;\n\t\t\turl += opts.format ? `/${opts.format}` : '';\n\n\t\t\treturn url;\n\t\t},\n\n\t\t/**\n\t\t * Set the Headers\n\t\t * \n\t\t * @param {String} api_key (optionnal)\n\t\t * \n\t\t * @returns {Object} headers \n\t\t */\n\t\t_setHeaders: function(api_key) {\n\t\t\tapi_key = api_key || this._token;\n\t\t\tlet headers = new Headers();\n\t\t\theaders.append('Accept', 'application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8');\n\t\t\theaders.append('Content-Type', 'application/json');\n\t\t\theaders.append('Authorization', api_key);\n\n\t\t\treturn headers;\n\t\t},\n\n\t\t_routeDone: function(datas, inputWaypoints, callback, context) {\n\n\t\t\t// **** DEBUG ****\n\t\t\t//console.log(datas);\n\t\t\t// **** DEBUG ****\n\n\t\t\tlet alts = [],\n\t\t\t\tformat = this.options.format,\n\t\t\t\tisgeoJSON = format === 'geojson',\n\t\t\t\troutes = isgeoJSON ? datas.features : datas.routes;\n\n\t\t\t// **** DEBUG ****\n\t\t\t// console.log(routes);\n\t\t\t// **** DEBUG ****\n\n\t\t\troutes.forEach((route, idr) => {\n\t\t\t\tlet geom = route.geometry,\n\t\t\t\t\tinstructions = [],\n\t\t\t\t\tsummary = isgeoJSON ? route.properties.summary : route.summary,\n\t\t\t\t\tway_points = isgeoJSON ? route.properties.way_points : route.way_points,\n\t\t\t\t\tsegments = isgeoJSON ? route.properties.segments : route.segments,\n\t\t\t\t\topts = this.options.routingQueryParams,\n\t\t\t\t\televation = (opts.elevation === 'true' || opts.elevation === true),\n\t\t\t\t\tcoordinates = isgeoJSON ? geom.coordinates : this._decodePolyline(geom, elevation),\n\t\t\t\t\tspeed = this._bikeSpeed(this.options.profile), // speed in km/h\n\t\t\t\t\tmulti = 3.6;\n\t\t\t\t// durations are in meter/s and distance in km \n\t\t\t\t// so duration = ( distance / (speed * 1000) ) * 3600\n\t\t\t\t// we can symplify: duration = ( distance / speed ) * 3.6\n\n\t\t\t\tif (isgeoJSON) {\n\t\t\t\t\tlet tmp = new Array(coordinates.length);\n\t\t\t\t\tcoordinates.forEach((c, i) => {\n\t\t\t\t\t\tlet latlng = [c[1], c[0]];\n\t\t\t\t\t\tif (elevation)\n\t\t\t\t\t\t\tlatlng.push(c[2] != 'unedifned' ? c[2] : null);\n\t\t\t\t\t\ttmp[i] = L.latLng(latlng);\n\t\t\t\t\t});\n\t\t\t\t\tcoordinates = tmp;\n\t\t\t\t}\n\n\t\t\t\tlet routeWaypoints = new Array(way_points.length);\n\t\t\t\tfor (let i = 0; i < way_points.length; i++) {\n\t\t\t\t\trouteWaypoints[i] = coordinates[way_points[i]];\n\t\t\t\t}\n\n\t\t\t\t// **** DEBUG ****\n\t\t\t\t// console.log(routeWaypoints);\n\t\t\t\t// **** DEBUG ****\n\n\t\t\t\tsegments.forEach((segment, ids) => {\n\t\t\t\t\tlet steps = segment.steps,\n\t\t\t\t\t\tlastsegment = ids == segments.length - 1;\n\t\t\t\t\tsteps.forEach((step, idx) => {\n\t\t\t\t\t\tlet laststep = idx == steps.length - 1,\n\t\t\t\t\t\t\tarrive = (lastsegment && laststep),\n\t\t\t\t\t\t\tstartseg = (idx == 0 && ids > 0);\n\n\t\t\t\t\t\tinstructions.push({\n\t\t\t\t\t\t\tidseg: ids + 1,\n\t\t\t\t\t\t\tdistance: step.distance,\n\t\t\t\t\t\t\ttime: (step.distance / speed) * multi, // overide step.duration\n\t\t\t\t\t\t\troad: step.name === '-' ? '' : step.name,\n\t\t\t\t\t\t\ttext: step.instruction || null,\n\t\t\t\t\t\t\ticon: this._typeToIcon(step.type, arrive, startseg),\n\t\t\t\t\t\t\ttype: step.type,\n\t\t\t\t\t\t\texit: step.exit_number || null,\n\t\t\t\t\t\t\tmodifier: this._typeToModifier(step.type, arrive, startseg), //arrive ? 'arrive' : startseg ? 'continue' : step.type === 11 ? 'head' : '',\n\t\t\t\t\t\t\tdirection: this._bearingToDirection(step.maneuver.bearing_after),\n\t\t\t\t\t\t\tindex: step.way_points[0],\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// ***** DEBUG ******\n\t\t\t\t\t\t// console.log(ids, idx, step.type, instructions[idx].type, step.instruction)\n\t\t\t\t\t\t// ***** DEBUG ******\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\talts.push({\n\t\t\t\t\tname: 'Initinéraire',\n\t\t\t\t\tcoordinates: coordinates,\n\t\t\t\t\tinstructions: instructions,\n\t\t\t\t\tsummary: {\n\t\t\t\t\t\ttotalTime: (summary.distance / speed) * multi, // overide summary.duration\n\t\t\t\t\t\ttotalDistance: summary.distance,\n\t\t\t\t\t\ttotalAscend: isgeoJSON ? route.properties.ascent : summary.ascent,\n\t\t\t\t\t\ttotalDescend: isgeoJSON ? route.properties.descent : summary.descent\n\t\t\t\t\t},\n\t\t\t\t\tinputWaypoints: inputWaypoints,\n\t\t\t\t\t//actualWaypoints: this._toWaypoints(inputWaypoints, routeWaypoints),\n\t\t\t\t\twaypoints: this._toWaypoints(inputWaypoints, routeWaypoints),\n\t\t\t\t\twaypointIndices: way_points\n\t\t\t\t});\n\n\t\t\t\t// **** DEBUG ****\n\t\t\t\t// console.log(alts);\n\t\t\t\t// **** DEBUG ****\n\t\t\t});\n\t\t\tcallback.call(context, null, alts);\n\t\t},\n\n\t\t/**\n\t\t * Return the estimated avg speed from profile (bike type)\n\t\t * \n\t\t * @param {String} bike\n\t\t * \n\t\t * @returns {Number} speed in km/h \n\t\t */\n\t\t_bikeSpeed: function(bike) {\n\t\t\tbike = bike || 'cycling-road';\n\t\t\tlet speed = this.options.bikespeed || {\n\t\t\t\t'cycling-road': 25,\n\t\t\t\t'cycling-regular': 20,\n\t\t\t\t'cycling-mountain': 15,\n\t\t\t\t'cycling-electric': 25,\n\t\t\t}\n\t\t\treturn speed[bike] || speed['cycling-regular'];\n\t\t},\n\n\t\t/**\n\t\t * Alias public method for _bikeSpeed()\n\t\t * \n\t\t * @param {String} bike \n\t\t * \n\t\t * @returns {Number} speed in km/h\n\t\t */\n\t\tbikeSpeed: function(bike) {\n\t\t\treturn this._bikeSpeed(bike);\n\t\t},\n\n\t\t/**\n\t\t * Bearing To Direction\n\t\t * \n\t\t * This is adapted from the Leaflet Routing Machine implementation\n\t\t * @see https://github.com/perliedman/leaflet-routing-machine/blob/master/src/osrm-v1.js\n\t\t * \n\t\t * @param {Number} bearing\n\t\t * @return {String} \n\t\t */\n\t\t_bearingToDirection: function(bearing) {\n\t\t\tvar oct = Math.round(bearing / 45) % 8;\n\t\t\treturn ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'][oct];\n\t\t},\n\n\t\t_typeToIcon: function(type, arrive, startseg) {\n\t\t\t/** \n\t\t\t *   0 - Turn left\n\t\t\t *   1 - Turn right\n\t\t\t *   2 - Turn sharp left\n\t\t\t *   3 - Turn sharp right\n\t\t\t *   4 - Turn slight left\n\t\t\t *   5 - Turn slight right\n\t\t\t *   6 - Continue\n\t\t\t *   7 - Enter roundabout\n\t\t\t *   8 - Exit roundabout\n\t\t\t *   9 - U-turn\n\t\t\t *   10 - Finish\n\t\t\t *   11 - Depart\n\t\t\t *   12 - Keep left\n\t\t\t *   13 - Keep right\n\t\t\t *   14 - Unknown\n\t\t\t */\n\t\t\tlet icon = {\n\t\t\t\t'0': 'turn-left',\n\t\t\t\t'1': 'turn-right',\n\t\t\t\t'2': 'sharp-left',\n\t\t\t\t'3': 'sharp-right',\n\t\t\t\t'4': 'bear-left',\n\t\t\t\t'5': 'bear-right',\n\t\t\t\t'6': 'continue',\n\t\t\t\t'7': 'enter-roundabout',\n\t\t\t\t'8': 'exit-roundabout',\n\t\t\t\t'9': 'u-turn',\n\t\t\t\t'10': arrive ? 'arrive' : 'via',\n\t\t\t\t'11': startseg ? 'startseg' : 'depart',\n\t\t\t\t'12': 'turn-left',\n\t\t\t\t'13': 'turn-right',\n\t\t\t\t'14': 'unknown'\n\t\t\t}\n\n\t\t\treturn icon[type] || 'unknown';\n\n\t\t},\n\n\t\t_typeToModifier: function(type, arrive, startseg) {\n\t\t\tlet modifier = {\n\t\t\t\t'0': 'Left',\n\t\t\t\t'1': 'Right',\n\t\t\t\t'2': 'SharpLeft',\n\t\t\t\t'3': 'SharpRight',\n\t\t\t\t'4': 'SlightLeft',\n\t\t\t\t'5': 'SlightRight',\n\t\t\t\t'6': 'Continue',\n\t\t\t\t'7': 'Roundabout',\n\t\t\t\t'8': 'Roundabout',\n\t\t\t\t'9': 'TurnAround',\n\t\t\t\t'10': arrive ? 'DestinationReached' : 'WaypointReached',\n\t\t\t\t'11': startseg ? 'Continue' : 'Head',\n\t\t\t\t'12': 'Left',\n\t\t\t\t'13': 'Right',\n\t\t\t\t'14': 'Onto'\n\t\t\t}\n\n\t\t\treturn modifier[type] || 'Onto'\n\n\t\t},\n\n\t\t/**\n\t\t * Decode an x,y or x,y,z encoded polyline\n\t\t * @param {*} encodedPolyline\n\t\t * @param {Boolean} includeElevation - true for x,y,z polyline\n\t\t * @returns {Array} of L.latLng() coordinates\n\t\t * \n\t\t * @see https://github.com/GIScience/openrouteservice-docs#geometry-decoding\n\t\t */\n\t\t_decodePolyline: (encodedPolyline, includeElevation) => {\n\t\t\t// array that holds the points\n\t\t\tlet points = []\n\t\t\tlet index = 0\n\t\t\tconst len = encodedPolyline.length\n\t\t\tlet lat = 0\n\t\t\tlet lng = 0\n\t\t\tlet ele = 0\n\t\t\twhile (index < len) {\n\t\t\t\tlet b\n\t\t\t\tlet shift = 0\n\t\t\t\tlet result = 0\n\t\t\t\tdo {\n\t\t\t\t\tb = encodedPolyline.charAt(index++).charCodeAt(0) - 63 // finds ascii\n\t\t\t\t\t\t// and subtract it by 63\n\t\t\t\t\tresult |= (b & 0x1f) << shift\n\t\t\t\t\tshift += 5\n\t\t\t\t} while (b >= 0x20)\n\n\t\t\t\tlat += ((result & 1) !== 0 ? ~(result >> 1) : (result >> 1))\n\t\t\t\tshift = 0\n\t\t\t\tresult = 0\n\t\t\t\tdo {\n\t\t\t\t\tb = encodedPolyline.charAt(index++).charCodeAt(0) - 63\n\t\t\t\t\tresult |= (b & 0x1f) << shift\n\t\t\t\t\tshift += 5\n\t\t\t\t} while (b >= 0x20)\n\t\t\t\tlng += ((result & 1) !== 0 ? ~(result >> 1) : (result >> 1))\n\n\t\t\t\tif (includeElevation) {\n\t\t\t\t\tshift = 0\n\t\t\t\t\tresult = 0\n\t\t\t\t\tdo {\n\t\t\t\t\t\tb = encodedPolyline.charAt(index++).charCodeAt(0) - 63\n\t\t\t\t\t\tresult |= (b & 0x1f) << shift\n\t\t\t\t\t\tshift += 5\n\t\t\t\t\t} while (b >= 0x20)\n\t\t\t\t\tele += ((result & 1) !== 0 ? ~(result >> 1) : (result >> 1))\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tlet location = [(lat / 1E5), (lng / 1E5)]\n\t\t\t\t\tif (includeElevation) location.push((ele / 100))\n\t\t\t\t\tpoints.push(L.latLng(location)); //points.push(location)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn points\n\t\t},\n\n\t\t_toWaypoints: function(inputWaypoints, vias) {\n\t\t\tlet wps = [];\n\t\t\tfor (let i = 0; i < vias.length; i++) {\n\n\t\t\t\twps.push(new L.Routing.Waypoint(vias[i],\n\t\t\t\t\tinputWaypoints[i].name,\n\t\t\t\t\tinputWaypoints[i].options));\n\t\t\t}\n\n\t\t\treturn wps;\n\t\t},\n\t});\n\n\tL.routing.openrouteservice = function(token, options) {\n\t\treturn new L.Routing.OpenRouteService(token, options);\n\t};\n\n\t/**\n\t * Copyright (c) 20Z0 Gérald Niel (https://framagit.org/gegeweb)\n\t * \n\t * Some parts of the code below:\n\t * Copyright (c) 2014-2019 Per Liedman (https://github.com/perliedman)\n\t * \n\t * Originaly under ISC Licence:\n\t * Permission to use, copy, modify, and/or distribute this software for any purpose \n\t * with or without fee is hereby granted, provided that the above copyright notice \n\t * and this permission notice appear in all copies.\n\t * \n\t * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH \n\t * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY \n\t * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, \n\t * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM \n\t * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR \n\t * OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE \n\t * OF THIS SOFTWARE.\n\t */\n\tL.Routing.FormatterORS = L.Routing.Formatter.extend({\n\t\t/**\n\t\t * Icon name\n\t\t *\n\t\t * @param {String} type\n\t\t * @returns {String}\n\t\t */\n\t\tgetIconName: function(instr, i) {\n\t\t\treturn instr.icon;\n\t\t},\n\n\t\tformatInstruction: function(instr, i) {\n\t\t\tlet text = instr.text || null;\n\t\t\tif (!text || this.options.steptotext) {\n\t\t\t\ttext = this.capitalize(L.Util.template(this._getInstructionTemplate(instr, i),\n\t\t\t\t\tL.extend({}, instr, {\n\t\t\t\t\t\texitStr: instr.exit ? this._localization.localize('formatOrder')(instr.exit) : '',\n\t\t\t\t\t\tdir: this._localization.localize(['directions', instr.direction]),\n\t\t\t\t\t\tmodifier: this._localization.localize(['directions', this.capitalize(instr.modifier)]),\n\t\t\t\t\t\tidseg: instr.idseg\n\t\t\t\t\t})));\n\t\t\t}\n\t\t\treturn text;\n\t\t},\n\n\t\tformatTime: function(t /* Number (seconds) */ ) {\n\t\t\tvar un = this.options.unitNames || this._localization.localize('units');\n\n\t\t\tlet hours = t / 3600,\n\t\t\t\tmin = (hours % 1) * 60,\n\t\t\t\tsec = (min % 1) * 60;\n\t\t\thours = Math.floor(hours);\n\t\t\thours = t > 3600 ? this._formatNum(hours, un.hours) : '';\n\t\t\tmin = Math.floor(min);\n\t\t\tmin = t > 60 ? this._formatNum(min, un.minutes) : '';\n\t\t\tsec = Math.floor(sec);\n\t\t\tsec = this._formatNum(sec, un.seconds);\n\n\t\t\treturn hours + min + sec;\n\t\t},\n\n\t\t_formatNum: function(number, unit) {\n\t\t\tlet prefix = number < 10 ? '0' : '';\n\t\t\treturn prefix + number + (unit || '');\n\t\t},\n\n\t\t_getInstructionTemplate: function(instr, i) {\n\t\t\tlet strings = this._localization.localize(['instructions', this.capitalize(instr.modifier)]);\n\t\t\tif (!strings)\n\t\t\t\tstrings = [\n\t\t\t\t\tthis._localization.localize(['directions', instr.modifier]),\n\t\t\t\t\t' ' + this._localization.localize(['instructions', 'Onto'])\n\t\t\t\t];\n\t\t\treturn strings[0] + (strings.length > 1 && instr.road ? strings[1] : '');\n\t\t},\n\n\t});\n\n\tL.routing.formatterORS = function(options) {\n\t\treturn new L.Routing.FormatterORS(options);\n\t};\n\n}));\n// @license-end"],"names":[],"mappings":";;;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACA;CACA,CAAC,SAAS,OAAO,EAAE;CACnB;CACA,CAAC,IAAI,CAAC,CAAC;CACP,CAAC,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,EAAE;CACjD;CACA,EAAE,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;CAC/B,EAAE,MAAM,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;CAC3C;CACA,EAAE,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;CACzB,EAAE,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;CAC9B,EAAE,MAAM;CACR;CACA,EAAE,IAAI,OAAO,MAAM,CAAC,CAAC,KAAK,WAAW;CACrC,GAAG,MAAM,8BAA8B,CAAC;CACxC,EAAE,IAAI,OAAO,MAAM,CAAC,CAAC,CAAC,OAAO,KAAK,WAAW;CAC7C,GAAG,MAAM,8CAA8C;CACvD,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;CACpB,EAAE;CACF,CAAC,CAAC,SAAS,CAAC,EAAE;CAEd,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC;CAC7B,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC;AAC7B;CACA,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;CAC7C,EAAE,OAAO,EAAE,OAAO;CAClB,EAAE,OAAO,EAAE;CACX,GAAG,SAAS,EAAE,EAAE,GAAG,IAAI;CACvB,GAAG,MAAM,EAAE,kCAAkC;CAC7C,GAAG,SAAS,EAAE,YAAY;CAC1B,GAAG,aAAa,EAAE,IAAI;CACtB,GAAG,SAAS,EAAE,cAAc;CAC5B,GAAG,oBAAoB,EAAE;CACzB,IAAI,YAAY,EAAE;CAClB,KAAK,UAAU;CACf,KAAK,YAAY;CACjB,KAAK;CACL,IAAI,UAAU,EAAE,OAAO;CACvB,IAAI,WAAW,EAAE,MAAM;CACvB,IAAI,YAAY,EAAE,aAAa;CAC/B,IAAI;CACJ,GAAG;AACH;CACA,EAAE,UAAU,EAAE,SAAS,KAAK,EAAE,OAAO,EAAE;CACvC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;CACpC,GAAG,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;CACvB,GAAG;AACH;CACA,EAAE,KAAK,EAAE,SAAS,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE;AACzD;CACA,GAAG,IAAI,QAAQ,GAAG,KAAK;CACvB,IAAI,GAAG,GAAG,EAAE;CACZ,IAAI,KAAK;CACT,IAAI,MAAM,GAAG,EAAE;CACf,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE;CAC7B,IAAI,MAAM,GAAG,IAAI,CAAC,kBAAkB,IAAI,EAAE,CAAC;AAC3C;CACA,GAAG,KAAK,GAAG,UAAU,CAAC,WAAW;CACjC,IAAI,QAAQ,GAAG,IAAI,CAAC;CACpB,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,QAAQ,EAAE;CACvC,KAAK,MAAM,EAAE,CAAC,CAAC;CACf,KAAK,OAAO,EAAE,sCAAsC;CACpD,KAAK,CAAC,CAAC;CACP,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AACpB;AACA;CACA;CACA;CACA;CACA,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK;CAC7B,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;CACtB,IAAI,GAAG,CAAC,IAAI,CAAC;CACb,KAAK,MAAM,EAAE,EAAE,CAAC,MAAM;CACtB,KAAK,IAAI,EAAE,EAAE,CAAC,IAAI;CAClB,KAAK,OAAO,EAAE,EAAE,CAAC,OAAO;CACxB,KAAK,CAAC,CAAC;CACP;CACA;CACA,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;CAChC,IAAI,CAAC,CAAC;CACN;CACA,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,CAAC;AAC7C;CACA,GAAG,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;AAC3C;CACA,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI;CACzB,KAAK,IAAI,CAAC,QAAQ,EAAE;CACpB,MAAM,YAAY,CAAC,KAAK,CAAC,CAAC;CAC1B,MAAM,IAAI,KAAK,CAAC,KAAK,EAAE;CACvB,OAAO,IAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC;CAC7B,OAAO,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI;CACnC,QAAQ,IAAI;CACZ,SAAS,IAAI,IAAI,EAAE;CACnB,UAAU,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;CAClC,UAAU,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;CACvC,UAAU,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;CAC3C,UAAU;CACV,SAAS,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,QAAQ,EAAE;CAC5C,UAAU,MAAM,EAAE,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC;CAClC,UAAU,OAAO,EAAE,GAAG,CAAC,OAAO;CAC9B,UAAU,CAAC,CAAC;CACZ,SAAS,CAAC,OAAO,CAAC,EAAE;CACpB,SAAS,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;CAC1B,SAAS;CACT,QAAQ,CAAC,CAAC;CACV,OAAO,MAAM;CACb,OAAO,IAAI,IAAI,CAAC,MAAM,IAAI,KAAK;CAC/B,QAAQ,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,QAAQ,EAAE,KAAK,CAAC,CAAC;CAClD;CACA,QAAQ,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAC;CACtD,OAAO;CACP,MAAM;CACN,KAAK,CAAC;CACN,KAAK,KAAK,CAAC,GAAG,IAAI;CAClB,KAAK,IAAI,CAAC,QAAQ,EAAE;CACpB,MAAM,YAAY,CAAC,KAAK,CAAC,CAAC;CAC1B,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,IAAI,QAAQ,EAAE;CACzC,OAAO,MAAM,EAAE,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC;CAC/B,OAAO,OAAO,EAAE,GAAG,CAAC,OAAO;CAC3B,OAAO,CAAC,CAAC;CACT,MAAM;CACN,KAAK,CAAC,CAAC;AACP;CACA,GAAG,OAAO,IAAI,CAAC;CACf,GAAG;AACH;CACA,EAAE,YAAY,CAAC,MAAM,EAAE;AACvB;CACA,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,EAAE;CAC7B,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE;CAChC,IAAI,IAAI,GAAG;CACX,KAAK,MAAM,EAAE,MAAM;CACnB,KAAK,OAAO,EAAE,OAAO;CACrB,KAAK,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;CACjC,KAAK;CACL,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;AACjC;CACA,GAAG,MAAM,OAAO,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC;CACnC,KAAK,IAAI,CAAC,QAAQ,IAAI;CACtB,KAAK,IAAI,QAAQ,CAAC,EAAE,EAAE;CACtB,MAAM,IAAI,MAAM,IAAI,KAAK,EAAE;CAC3B,OAAO,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;CAC9B,OAAO;CACP,OAAO,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;CAC9B,MAAM,MAAM;CACZ,MAAM,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM;CAClC,OAAO,OAAO,GAAG,QAAQ,CAAC,UAAU;CACpC,OAAO,GAAG,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;CAChC,MAAM,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC;CAC1B,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,EAAE,EAAE;CACtD,MAAM;CACN,KAAK,CAAC,CAAC;AACP;CACA,GAAG,OAAO,OAAO,CAAC;CAClB,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,SAAS,EAAE,SAAS,IAAI,EAAE;CAC5B,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;CAC/B,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,IAAI,kCAAkC,CAAC;CAC7D,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE,CAAC,CAAC;CAC3C,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,IAAI,YAAY,EAAE,CAAC,CAAC;CAC/C,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,IAAI,cAAc,EAAE,CAAC,CAAC;CACjD,GAAG,GAAG,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;AAC/C;CACA,GAAG,OAAO,GAAG,CAAC;CACd,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,WAAW,EAAE,SAAS,OAAO,EAAE;CACjC,GAAG,OAAO,GAAG,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC;CACpC,GAAG,IAAI,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;CAC/B,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,qFAAqF,CAAC,CAAC;CACnH,GAAG,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;CACtD,GAAG,OAAO,CAAC,MAAM,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;AAC5C;CACA,GAAG,OAAO,OAAO,CAAC;CAClB,GAAG;AACH;CACA,EAAE,UAAU,EAAE,SAAS,KAAK,EAAE,cAAc,EAAE,QAAQ,EAAE,OAAO,EAAE;AACjE;CACA;CACA;CACA;AACA;CACA,GAAG,IAAI,IAAI,GAAG,EAAE;CAChB,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;CAChC,IAAI,SAAS,GAAG,MAAM,KAAK,SAAS;CACpC,IAAI,MAAM,GAAG,SAAS,GAAG,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC;AACvD;CACA;CACA;CACA;AACA;CACA,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,GAAG,KAAK;CAClC,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,QAAQ;CAC7B,KAAK,YAAY,GAAG,EAAE;CACtB,KAAK,OAAO,GAAG,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO;CACnE,KAAK,UAAU,GAAG,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU;CAC5E,KAAK,QAAQ,GAAG,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ;CACtE,KAAK,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,kBAAkB;CAC3C,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,KAAK,MAAM,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC;CACvE,KAAK,WAAW,GAAG,SAAS,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,SAAS,CAAC;CACvF,KAAK,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;CAClD,KAAK,KAAK,GAAG,GAAG,CAAC;CACjB;CACA;CACA;AACA;CACA,IAAI,IAAI,SAAS,EAAE;CACnB,KAAK,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;CAC7C,KAAK,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK;CACnC,MAAM,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CAChC,MAAM,IAAI,SAAS;CACnB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;CACtD,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;CAChC,MAAM,CAAC,CAAC;CACR,KAAK,WAAW,GAAG,GAAG,CAAC;CACvB,KAAK;AACL;CACA,IAAI,IAAI,cAAc,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;CACtD,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;CAChD,KAAK,cAAc,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;CACpD,KAAK;AACL;CACA;CACA;CACA;AACA;CACA,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,GAAG,KAAK;CACvC,KAAK,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK;CAC9B,MAAM,WAAW,GAAG,GAAG,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;CAC/C,KAAK,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,GAAG,KAAK;CAClC,MAAM,IAAI,QAAQ,GAAG,GAAG,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC;CAC5C,OAAO,MAAM,IAAI,WAAW,IAAI,QAAQ,CAAC;CACzC,OAAO,QAAQ,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC;AACxC;CACA,MAAM,YAAY,CAAC,IAAI,CAAC;CACxB,OAAO,KAAK,EAAE,GAAG,GAAG,CAAC;CACrB,OAAO,QAAQ,EAAE,IAAI,CAAC,QAAQ;CAC9B,OAAO,IAAI,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,IAAI,KAAK;CAC5C,OAAO,IAAI,EAAE,IAAI,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI;CAC/C,OAAO,IAAI,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI;CACrC,OAAO,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,CAAC;CAC1D,OAAO,IAAI,EAAE,IAAI,CAAC,IAAI;CACtB,OAAO,IAAI,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI;CACrC,OAAO,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,CAAC;CAClE,OAAO,SAAS,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;CACvE,OAAO,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;CAChC,OAAO,CAAC,CAAC;AACT;CACA;CACA;CACA;CACA,MAAM,CAAC,CAAC;CACR,KAAK,CAAC,CAAC;CACP,IAAI,IAAI,CAAC,IAAI,CAAC;CACd,KAAK,IAAI,EAAE,cAAc;CACzB,KAAK,WAAW,EAAE,WAAW;CAC7B,KAAK,YAAY,EAAE,YAAY;CAC/B,KAAK,OAAO,EAAE;CACd,MAAM,SAAS,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,IAAI,KAAK;CACnD,MAAM,aAAa,EAAE,OAAO,CAAC,QAAQ;CACrC,MAAM,WAAW,EAAE,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM;CACvE,MAAM,YAAY,EAAE,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO;CAC1E,MAAM;CACN,KAAK,cAAc,EAAE,cAAc;CACnC;CACA,KAAK,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,cAAc,CAAC;CACjE,KAAK,eAAe,EAAE,UAAU;CAChC,KAAK,CAAC,CAAC;AACP;CACA;CACA;CACA;CACA,IAAI,CAAC,CAAC;CACN,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;CACtC,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,UAAU,EAAE,SAAS,IAAI,EAAE;CAC7B,GAAG,IAAI,GAAG,IAAI,IAAI,cAAc,CAAC;CACjC,GAAG,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI;CACzC,IAAI,cAAc,EAAE,EAAE;CACtB,IAAI,iBAAiB,EAAE,EAAE;CACzB,IAAI,kBAAkB,EAAE,EAAE;CAC1B,IAAI,kBAAkB,EAAE,EAAE;CAC1B,KAAI;CACJ,GAAG,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;CAClD,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,SAAS,EAAE,SAAS,IAAI,EAAE;CAC5B,GAAG,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;CAChC,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,mBAAmB,EAAE,SAAS,OAAO,EAAE;CACzC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;CAC1C,GAAG,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;CAC5D,GAAG;AACH;CACA,EAAE,WAAW,EAAE,SAAS,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE;CAChD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,GAAG,IAAI,IAAI,GAAG;CACd,IAAI,GAAG,EAAE,WAAW;CACpB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,aAAa;CACtB,IAAI,GAAG,EAAE,WAAW;CACpB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,UAAU;CACnB,IAAI,GAAG,EAAE,kBAAkB;CAC3B,IAAI,GAAG,EAAE,iBAAiB;CAC1B,IAAI,GAAG,EAAE,QAAQ;CACjB,IAAI,IAAI,EAAE,MAAM,GAAG,QAAQ,GAAG,KAAK;CACnC,IAAI,IAAI,EAAE,QAAQ,GAAG,UAAU,GAAG,QAAQ;CAC1C,IAAI,IAAI,EAAE,WAAW;CACrB,IAAI,IAAI,EAAE,YAAY;CACtB,IAAI,IAAI,EAAE,SAAS;CACnB,KAAI;AACJ;CACA,GAAG,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC;AAClC;CACA,GAAG;AACH;CACA,EAAE,eAAe,EAAE,SAAS,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE;CACpD,GAAG,IAAI,QAAQ,GAAG;CAClB,IAAI,GAAG,EAAE,MAAM;CACf,IAAI,GAAG,EAAE,OAAO;CAChB,IAAI,GAAG,EAAE,WAAW;CACpB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,aAAa;CACtB,IAAI,GAAG,EAAE,UAAU;CACnB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,GAAG,EAAE,YAAY;CACrB,IAAI,IAAI,EAAE,MAAM,GAAG,oBAAoB,GAAG,iBAAiB;CAC3D,IAAI,IAAI,EAAE,QAAQ,GAAG,UAAU,GAAG,MAAM;CACxC,IAAI,IAAI,EAAE,MAAM;CAChB,IAAI,IAAI,EAAE,OAAO;CACjB,IAAI,IAAI,EAAE,MAAM;CAChB,KAAI;AACJ;CACA,GAAG,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,MAAM;AAClC;CACA,GAAG;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,eAAe,EAAE,CAAC,eAAe,EAAE,gBAAgB,KAAK;CAC1D;CACA,GAAG,IAAI,MAAM,GAAG,GAAE;CAClB,GAAG,IAAI,KAAK,GAAG,EAAC;CAChB,GAAG,MAAM,GAAG,GAAG,eAAe,CAAC,OAAM;CACrC,GAAG,IAAI,GAAG,GAAG,EAAC;CACd,GAAG,IAAI,GAAG,GAAG,EAAC;CACd,GAAG,IAAI,GAAG,GAAG,EAAC;CACd,GAAG,OAAO,KAAK,GAAG,GAAG,EAAE;CACvB,IAAI,IAAI,EAAC;CACT,IAAI,IAAI,KAAK,GAAG,EAAC;CACjB,IAAI,IAAI,MAAM,GAAG,EAAC;CAClB,IAAI,GAAG;CACP,KAAK,CAAC,GAAG,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,GAAE;CAC3D;CACA,KAAK,MAAM,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK;CAClC,KAAK,KAAK,IAAI,EAAC;CACf,KAAK,QAAQ,CAAC,IAAI,IAAI,CAAC;AACvB;CACA,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,IAAI,CAAC,CAAC,IAAI,MAAM,IAAI,CAAC,CAAC,EAAC;CAChE,IAAI,KAAK,GAAG,EAAC;CACb,IAAI,MAAM,GAAG,EAAC;CACd,IAAI,GAAG;CACP,KAAK,CAAC,GAAG,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,GAAE;CAC3D,KAAK,MAAM,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK;CAClC,KAAK,KAAK,IAAI,EAAC;CACf,KAAK,QAAQ,CAAC,IAAI,IAAI,CAAC;CACvB,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,IAAI,CAAC,CAAC,IAAI,MAAM,IAAI,CAAC,CAAC,EAAC;AAChE;CACA,IAAI,IAAI,gBAAgB,EAAE;CAC1B,KAAK,KAAK,GAAG,EAAC;CACd,KAAK,MAAM,GAAG,EAAC;CACf,KAAK,GAAG;CACR,MAAM,CAAC,GAAG,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,GAAE;CAC5D,MAAM,MAAM,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK;CACnC,MAAM,KAAK,IAAI,EAAC;CAChB,MAAM,QAAQ,CAAC,IAAI,IAAI,CAAC;CACxB,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,IAAI,CAAC,CAAC,IAAI,MAAM,IAAI,CAAC,CAAC,EAAC;CACjE,KAAK;CACL,IAAI,IAAI;CACR,KAAK,IAAI,QAAQ,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAE;CAC9C,KAAK,IAAI,gBAAgB,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,GAAG,GAAG,GAAE;CACrD,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;CACrC,KAAK,CAAC,OAAO,CAAC,EAAE;CAChB,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,EAAC;CACnB,KAAK;CACL,IAAI;CACJ,GAAG,OAAO,MAAM;CAChB,GAAG;AACH;CACA,EAAE,YAAY,EAAE,SAAS,cAAc,EAAE,IAAI,EAAE;CAC/C,GAAG,IAAI,GAAG,GAAG,EAAE,CAAC;CAChB,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC;CACA,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;CAC3C,KAAK,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI;CAC3B,KAAK,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;CACjC,IAAI;AACJ;CACA,GAAG,OAAO,GAAG,CAAC;CACd,GAAG;CACH,EAAE,CAAC,CAAC;AACJ;CACA,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,GAAG,SAAS,KAAK,EAAE,OAAO,EAAE;CACvD,EAAE,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;CACxD,EAAE,CAAC;AACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC;CACrD;CACA;CACA;CACA;CACA;CACA;CACA,EAAE,WAAW,EAAE,SAAS,KAAK,EAAE,CAAC,EAAE;CAClC,GAAG,OAAO,KAAK,CAAC,IAAI,CAAC;CACrB,GAAG;AACH;CACA,EAAE,iBAAiB,EAAE,SAAS,KAAK,EAAE,CAAC,EAAE;CACxC,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC;CACjC,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;CACzC,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC,CAAC;CACjF,KAAK,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE;CACzB,MAAM,OAAO,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE;CACvF,MAAM,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;CACvE,MAAM,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;CAC5F,MAAM,KAAK,EAAE,KAAK,CAAC,KAAK;CACxB,MAAM,CAAC,CAAC,CAAC,CAAC;CACV,IAAI;CACJ,GAAG,OAAO,IAAI,CAAC;CACf,GAAG;AACH;CACA,EAAE,UAAU,EAAE,SAAS,CAAC,0BAA0B;CAClD,GAAG,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC3E;CACA,GAAG,IAAI,KAAK,GAAG,CAAC,GAAG,IAAI;CACvB,IAAI,GAAG,GAAG,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE;CAC1B,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;CACzB,GAAG,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;CAC7B,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;CAC5D,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;CACzB,GAAG,GAAG,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;CACxD,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;CACzB,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1C;CACA,GAAG,OAAO,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;CAC5B,GAAG;AACH;CACA,EAAE,UAAU,EAAE,SAAS,MAAM,EAAE,IAAI,EAAE;CACrC,GAAG,IAAI,MAAM,GAAG,MAAM,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;CACvC,GAAG,OAAO,MAAM,GAAG,MAAM,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC;CACzC,GAAG;AACH;CACA,EAAE,uBAAuB,EAAE,SAAS,KAAK,EAAE,CAAC,EAAE;CAC9C,GAAG,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;CAChG,GAAG,IAAI,CAAC,OAAO;CACf,IAAI,OAAO,GAAG;CACd,KAAK,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;CAChE,KAAK,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;CAChE,KAAK,CAAC;CACN,GAAG,OAAO,OAAO,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;CAC5E,GAAG;AACH;CACA,EAAE,CAAC,CAAC;AACJ;CACA,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,GAAG,SAAS,OAAO,EAAE;CAC5C,EAAE,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;CAC7C,EAAE,CAAC;AACH;CACA,CAAC,CAAC,EAAE;CACJ;;;;"}