{"version":3,"file":"VectorTileLayer.min.js","sources":["../node_modules/@mapbox/point-geometry/index.js","../node_modules/@mapbox/vector-tile/lib/vectortilefeature.js","../node_modules/@mapbox/vector-tile/lib/vectortilelayer.js","../node_modules/@mapbox/vector-tile/lib/vectortile.js","../node_modules/@mapbox/vector-tile/index.js","../src/js/FeatureLayer.js","../src/js/FeatureTile.js","../src/js/fetch.js","../node_modules/ieee754/index.js","../node_modules/pbf/index.js","../src/js/VectorTileLayer.js"],"sourcesContent":["'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","'use strict';\n\nvar Point = require('@mapbox/point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = 'Multi' + type;\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('id' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n","'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n","'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n","module.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the\n *      distribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *      contributors may be used to endorse or promote products derived\n *      from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*property\n    _map, addClass, addInteractiveTarget, addTo, appendChild, bbox, className,\n    color, create, dashArray, dashOffset, feature, fill, fillColor, fillOpacity,\n    fillRule, freeze, interactive, layerName, lineCap, lineJoin, loadGeometry,\n    map, opacity, options, pointsToPath, properties, prototype, removeAttribute,\n    removeClass, removeFrom, removeInteractiveTarget, scaleBy, setAttribute,\n    setStyle, stroke, type, types, weight\n*/\n\nimport {\n    DomUtil,\n    Layer,\n    Path,\n    Polygon,\n    SVG,\n    bounds,\n    extend,\n    point\n} from \"leaflet\";\nimport {VectorTileFeature} from \"@mapbox/vector-tile\";\n\nfunction featureLayer(feature, layerName, rootGroup, pxPerExtent, options) {\n    const self = new Layer(options);\n    const m_path = SVG.create(\"path\");\n    const m_type = VectorTileFeature.types[feature.type];\n\n    options = extend({}, options);\n\n    self.feature = feature;\n    self.layerName = layerName;\n\n    // Compatibility with Leaflet.VectorGrid\n    self.properties = feature.properties;\n\n    /*\n     * FeatureLayers only serve as event targets and are never actually\n     * \"added\" to the map, so we override the base class's addTo.\n     */\n    self.addTo = function addTo(map) {\n        // Required by addInteractiveTarget.\n        self._map = map;\n        self.addInteractiveTarget(m_path);\n    };\n\n    self.removeFrom = function removeFrom() {\n        self.removeInteractiveTarget(m_path);\n        delete self._map;\n    };\n\n    self.setStyle = function setStyle(options) {\n        const path = m_path;\n\n        options = extend(\n            {},\n            (\n                \"Polygon\" === m_type\n                ? Polygon.prototype.options\n                : Path.prototype.options\n            ),\n            options\n        );\n\n        if (options.stroke) {\n            path.setAttribute(\"stroke\", options.color);\n            path.setAttribute(\"stroke-opacity\", options.opacity);\n            path.setAttribute(\"stroke-width\", options.weight);\n            path.setAttribute(\"stroke-linecap\", options.lineCap);\n            path.setAttribute(\"stroke-linejoin\", options.lineJoin);\n\n            if (options.dashArray) {\n                path.setAttribute(\"stroke-dasharray\", options.dashArray);\n            } else {\n                path.removeAttribute(\"stroke-dasharray\");\n            }\n\n            if (options.dashOffset) {\n                path.setAttribute(\"stroke-dashoffset\", options.dashOffset);\n            } else {\n                path.removeAttribute(\"stroke-dashoffset\");\n            }\n        } else {\n            path.setAttribute(\"stroke\", \"none\");\n        }\n\n        if (options.fill) {\n            path.setAttribute(\"fill\", options.fillColor || options.color);\n            path.setAttribute(\"fill-opacity\", options.fillOpacity);\n            path.setAttribute(\"fill-rule\", options.fillRule || \"evenodd\");\n        } else {\n            path.setAttribute(\"fill\", \"none\");\n        }\n\n        if (options.interactive) {\n            /*\n             * Leaflet's \"interactive\" class only applies to\n             * renderers that are immediate descendants of a\n             * pane.\n             */\n            path.setAttribute(\"pointer-events\", \"auto\");\n            DomUtil.addClass(path, \"leaflet-interactive\");\n        } else {\n            DomUtil.removeClass(path, \"leaflet-interactive\");\n            path.removeAttribute(\"pointer-events\");\n        }\n\n        return path;\n    };\n\n    const scalePoint = (p) => point(p).scaleBy(pxPerExtent);\n\n    self.bbox = function bbox() {\n        const [x0, y0, x1, y1] = feature.bbox();\n        return bounds(scalePoint([x0, y0]), scalePoint([x1, y1]));\n    };\n\n    switch (m_type) {\n    case \"Point\":\n        break;\n    case \"LineString\":\n    case \"Polygon\":\n        m_path.setAttribute(\n            \"d\",\n            SVG.pointsToPath(\n                feature.loadGeometry().map((ring) => ring.map(scalePoint)),\n                \"Polygon\" === m_type\n            )\n        );\n\n        if (options.className) {\n            DomUtil.addClass(m_path, options.className);\n        }\n        self.setStyle(options);\n\n        rootGroup.appendChild(m_path);\n        break;\n    }\n\n    return self;\n}\n\nexport default Object.freeze(featureLayer);\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the\n *      distribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *      contributors may be used to endorse or promote products derived\n *      from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*property\n    add, addFeatureLayer, addVectorTile, appendChild, coords, create, divideBy,\n    domElement, eachFeatureLayer, extent, feature, forEach, freeze,\n    getFeatureStyle, getTileSize, global, keys, layers, length, push, scaleBy,\n    setAttribute, x, y\n*/\n\nimport featureLayer from \"./FeatureLayer.js\";\nimport {SVG} from \"leaflet\";\n\nexport default Object.freeze(function featureTile(coords, layer) {\n    const self = {};\n    const m_tileSize = layer.getTileSize();\n    const m_svg = SVG.create(\"svg\");\n    const m_rootGroup = SVG.create(\"g\");\n    const m_layers = [];\n\n    m_svg.setAttribute(\"viewBox\", `0 0 ${m_tileSize.x} ${m_tileSize.y}`);\n    m_svg.appendChild(m_rootGroup);\n\n    function addFeature(feature, layerName, pxPerExtent) {\n        const featureStyle = layer.getFeatureStyle(feature, layerName);\n        if (!featureStyle) {\n            return;\n        }\n\n        const ftrLyr = featureLayer(\n            feature,\n            layerName,\n            m_rootGroup,\n            pxPerExtent,\n            featureStyle\n        );\n        m_layers.push(ftrLyr);\n        layer.addFeatureLayer(ftrLyr);\n    }\n\n    self.addVectorTile = function addVectorTile(vectorTile) {\n        Object.keys(vectorTile.layers).forEach(function (layerName) {\n            const tileLayer = vectorTile.layers[layerName];\n            const pxPerExtent = m_tileSize.divideBy(tileLayer.extent);\n\n            let i = 0;\n            while (i !== tileLayer.length) {\n                addFeature(tileLayer.feature(i), layerName, pxPerExtent);\n                i += 1;\n            }\n        });\n\n        return self;\n    };\n\n    self.global = (p) => coords.scaleBy(m_tileSize).add(p);\n    self.eachFeatureLayer = (func) => m_layers.forEach(\n        (...args) => func(...args, self)\n    );\n    self.domElement = () => m_svg;\n    self.coords = () => coords;\n\n    return self;\n});\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the\n *      distribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *      contributors may be used to endorse or promote products derived\n *      from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*jslint browser*/\n\n/*property\n    arrayBuffer, fetch, freeze, ok, onload, open, response, responseType, send,\n    status, statusText\n*/\n\nlet fetch;\nif (\"function\" === typeof window.fetch) {\n    fetch = window.fetch;\n} else {\n    fetch = function (url) {\n        const xhr = new XMLHttpRequest();\n\n        xhr.open(\"GET\", url);\n        xhr.responseType = \"arraybuffer\";\n\n        return new Promise(function (resolve) {\n            xhr.onload = () => resolve({\n                ok: 200 === xhr.status,\n                status: xhr.status,\n                statusText: xhr.statusText,\n                arrayBuffer() {\n                    return xhr.response;\n                }\n            });\n            xhr.send();\n        });\n    };\n}\n\nexport default Object.freeze(fetch);\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nvar TEXT_DECODER_MIN_LENGTH = 12;\nvar utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos;\n        var pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return readUtf8TextDecoder(this.buf, pos, end);\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction readUtf8TextDecoder(buf, pos, end) {\n    return utf8TextDecoder.decode(buf.subarray(pos, end));\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the\n *      distribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *      contributors may be used to endorse or promote products derived\n *      from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*property\n    _globalTileRange, _tileZoom, abs, addEventParent, addFeatureLayer, addTo,\n    addVectorTile, arrayBuffer, bbox, call, coords, createTile, crs, divideBy,\n    domElement, eachFeatureLayer, extend, feature, filter, forEach, freeze,\n    getBounds, getFeatureId, getFeatureStyle, getPrototypeOf, getTileSize,\n    getTileUrl, getZoom, getZoomScale, global, infinite, isArray, join, keys,\n    layerName, length, max, maxDetailZoom, maxZoom, min, minDetailZoom, minZoom,\n    off, ok, on, onAdd, onRemove, options, properties, removeEventParent,\n    removeFeatureLayer, removeFrom, resetFeatureStyle, round, s,\n    setFeatureStyle, setStyle, split, status, statusText, style, subdomains,\n    template, then, unproject, vectorTileLayerStyles, x, y, z, zoomOffset,\n    zoomReverse\n*/\n\nimport featureTile from \"./FeatureTile.js\";\nimport fetch from \"./fetch.js\";\nimport {GridLayer, Util, latLngBounds} from \"leaflet\";\nimport Pbf from \"pbf\";\nimport {VectorTile} from \"@mapbox/vector-tile\";\n\nfunction err(...args) {\n    return new Error(args.join(\": \"));\n}\n\nfunction load(url) {\n    return fetch(url).then(function (response) {\n        if (response.ok) {\n            return response.arrayBuffer();\n        }\n        if (404 !== response.status) {\n            throw err(url, response.status, response.statusText);\n        }\n    });\n}\n\nfunction tileId(coords) {\n    return `${coords.x}|${coords.y}|${coords.z}`;\n}\n\nconst defaultOptions = {\n    filter: undefined,\n    minZoom: 0,\n    maxZoom: 18,\n    maxDetailZoom: undefined,\n    minDetailZoom: undefined,\n    subdomains: \"abc\",\n    zoomOffset: 0,\n    zoomReverse: false\n};\n\nexport default Object.freeze(function vectorTileLayer(url, options) {\n    const self = new GridLayer(options);\n    const m_super = Object.getPrototypeOf(self);\n    const m_featureStyle = {};\n\n    function legacyStyle(feature, layerName, zoom) {\n        const {getFeatureId, vectorTileLayerStyles} = options;\n\n        let layerStyle = vectorTileLayerStyles[layerName];\n        if (getFeatureId) {\n            const fId = getFeatureId(feature);\n            if (m_featureStyle[fId]) {\n                layerStyle = m_featureStyle[fId];\n            }\n        }\n\n        if (\"function\" === typeof layerStyle) {\n            layerStyle = layerStyle(feature.properties, zoom);\n        }\n\n        if (Array.isArray(layerStyle)) {\n            if (!layerStyle.length) {\n                return;\n            }\n            layerStyle = layerStyle[0];\n        }\n\n        return layerStyle;\n    }\n\n    options = Util.extend({}, defaultOptions, options);\n\n    if (\"string\" === typeof options.subdomains) {\n        options.subdomains = options.subdomains.split(\"\");\n    }\n\n    // Compatibility with Leaflet.VectorGrid\n    if (options.vectorTileLayerStyles) {\n        options.style = legacyStyle;\n    }\n\n    const m_featureTiles = {};\n    self.on(\"tileunload\", function (evt) {\n        const id = tileId(evt.coords);\n        const tile = m_featureTiles[id];\n\n        if (!tile) {\n            return;\n        }\n        tile.eachFeatureLayer(\n            (featureLayer) => self.removeFeatureLayer(featureLayer)\n        );\n        delete m_featureTiles[id];\n    });\n\n    let m_map;\n    let m_zoom;\n    function updateZoom() {\n        m_zoom = m_map.getZoom();\n    }\n\n    self.onAdd = function onAdd(map, ...rest) {\n        m_map = map;\n        m_map.on(\"zoomend\", updateZoom);\n        updateZoom();\n        return m_super.onAdd.call(self, map, ...rest);\n    };\n\n    self.onRemove = function onRemove(...args) {\n        m_map.off(\"zoomend\", updateZoom);\n        m_map = undefined;\n        return m_super.onRemove.call(self, ...args);\n    };\n\n    self.createTile = function createTile(coords, done) {\n        const id = tileId(coords);\n        const tile = featureTile(coords, self);\n\n        m_featureTiles[id] = tile;\n        load(self.getTileUrl(coords)).then(function (buffer) {\n            tile.addVectorTile(new VectorTile(new Pbf(buffer)));\n            done(null, tile);\n        }, function (exc) {\n            done(exc, tile);\n        });\n\n        return tile.domElement();\n    };\n\n    function getSubdomain(tilePoint) {\n        const index = (\n            Math.abs(tilePoint.x + tilePoint.y) %\n            options.subdomains.length\n        );\n        return options.subdomains[index];\n    }\n\n    function clampZoom(zoom) {\n        const {minDetailZoom, maxDetailZoom} = options;\n\n        if (undefined !== minDetailZoom && zoom < minDetailZoom) {\n            return minDetailZoom;\n        }\n\n        if (undefined !== maxDetailZoom && maxDetailZoom < zoom) {\n            return maxDetailZoom;\n        }\n\n        return zoom;\n    }\n\n    function getZoomForUrl(zoom) {\n        const {maxZoom, zoomReverse, zoomOffset} = options;\n\n        if (zoomReverse) {\n            zoom = maxZoom - zoom;\n        }\n\n        return clampZoom(zoom + zoomOffset);\n    }\n\n    self.getTileUrl = function getTileUrl(coords) {\n        const data = {\n            s: getSubdomain(coords),\n            x: coords.x,\n            y: coords.y,\n            z: getZoomForUrl(coords.z)\n        };\n        if (!m_map.options.crs.infinite) {\n            data[\"-y\"] = self._globalTileRange.max.y - coords.y;\n        }\n        return Util.template(\n            url,\n            Util.extend(data, options)\n        );\n    };\n\n    function eachFeatureLayer(func) {\n        Object.keys(m_featureTiles).forEach(\n            (tileId) => m_featureTiles[tileId].eachFeatureLayer(func)\n        );\n    }\n\n    self.setStyle = function setStyle(style) {\n        options.style = style;\n\n        eachFeatureLayer(function (featureLayer) {\n            const {feature, layerName} = featureLayer;\n            const featureStyle = self.getFeatureStyle(feature, layerName);\n\n            featureLayer.setStyle(featureStyle);\n        });\n\n        return self;\n    };\n\n    // Compatibilty with Leaflet.VectorGrid\n    self.setFeatureStyle = function setFeatureStyle(id, style) {\n        m_featureStyle[id] = style;\n        self.setStyle(options.style);\n\n        return self;\n    };\n\n    // Compatibilty with Leaflet.VectorGrid\n    self.resetFeatureStyle = function resetFeatureStyle(id) {\n        delete m_featureStyle[id];\n        self.setStyle(options.style);\n\n        return self;\n    };\n\n    self.getTileSize = function getTileSize() {\n        const tileSize = m_super.getTileSize.call(self);\n        const zoom = self._tileZoom;\n\n        return tileSize.divideBy(\n            m_map.getZoomScale(clampZoom(zoom), zoom)\n        ).round();\n    };\n\n    self.getFeatureStyle = function getFeatureStyle(feature, layerName) {\n        if (options.filter && !options.filter(feature, layerName, m_zoom)) {\n            return;\n        }\n\n        const style = options.style;\n\n        return (\n            \"function\" === typeof style\n            ? style(feature, layerName, m_zoom)\n            : style\n        );\n    };\n\n    self.addFeatureLayer = function addFeatureLayer(featureLayer) {\n        featureLayer.addTo(m_map);\n        featureLayer.addEventParent(self);\n\n        return self;\n    };\n\n    self.removeFeatureLayer = function removeFeatureLayer(featureLayer) {\n        featureLayer.removeEventParent(self);\n        featureLayer.removeFrom(m_map);\n\n        return self;\n    };\n\n    self.getBounds = function getBounds() {\n        // Compute bounds in lat/lng for all tiles.\n        let bounds;\n        eachFeatureLayer(function (layer, idx, ignore, tile) {\n            /// Convert from tile coordinates to lat/lng.\n            const toLatLng = (p) => m_map.unproject(\n                tile.global(p),\n                tile.coords().z\n            );\n\n            const bbox = layer.bbox();\n            const tileBounds = latLngBounds(\n                toLatLng(bbox.min),\n                toLatLng(bbox.max)\n            );\n            if (!bounds) {\n                bounds = tileBounds;\n            } else {\n                bounds.extend(tileBounds);\n            }\n        });\n\n        return bounds;\n    };\n\n    return self;\n});\n"],"names":["pointGeometry","Point","x","y","this","prototype","clone","add","p","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","k","_mult","div","_div","rotate","a","_rotate","rotateAround","_rotateAround","matMult","m","_matMult","unit","_unit","perp","_perp","round","_round","mag","Math","sqrt","equals","other","dist","distSqr","dx","dy","angle","atan2","angleTo","b","angleWith","angleWithSep","cos","sin","convert","Array","isArray","require$$0","vectortilefeature","VectorTileFeature","pbf","end","extent","keys","values","properties","type","_pbf","_geometry","_keys","_values","readFields","readFeature","tag","feature","id","readVarint","pos","key","value","readTag","signedArea","ring","p1","p2","sum","i","len","length","j","types","loadGeometry","line","cmd","lines","cmdLen","readSVarint","push","Error","bbox","x1","Infinity","x2","y1","y2","toGeoJSON","z","size","pow","x0","y0","coords","project","PI","atan","exp","points","rings","polygon","ccw","polygons","area","undefined","classifyRings","result","geometry","coordinates","vectortilelayer","VectorTileLayer","version","name","_features","readLayer","layer","readString","readFloat","readDouble","readVarint64","readBoolean","readValueMessage","vectortile","layers","readTile","require$$1","Object","freeze","layerName","rootGroup","pxPerExtent","options","self","Layer","m_path","SVG","create","m_type","extend","addTo","map","_map","addInteractiveTarget","removeFrom","removeInteractiveTarget","setStyle","path","Polygon","Path","stroke","setAttribute","color","opacity","weight","lineCap","lineJoin","dashArray","removeAttribute","dashOffset","fill","fillColor","fillOpacity","fillRule","interactive","DomUtil","addClass","removeClass","scalePoint","point","scaleBy","bounds","pointsToPath","className","appendChild","m_tileSize","getTileSize","m_svg","m_rootGroup","m_layers","addFeature","featureStyle","getFeatureStyle","ftrLyr","featureLayer","addFeatureLayer","addVectorTile","vectorTile","forEach","tileLayer","divideBy","global","eachFeatureLayer","func","args","domElement","fetch","window","url","xhr","XMLHttpRequest","open","responseType","Promise","resolve","onload","ok","status","statusText","arrayBuffer","response","send","buffer","offset","isLE","mLen","nBytes","e","eLen","eMax","eBias","nBits","d","s","NaN","c","rt","abs","isNaN","floor","log","LN2","Pbf","ieee754","buf","ArrayBuffer","isView","Uint8Array","Varint","Fixed64","Bytes","Fixed32","utf8TextDecoder","TextDecoder","readPackedEnd","toNum","low","high","isSigned","makeRoomForExtraLength","startPos","extraLen","realloc","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","val","readInt32","load","then","join","err","tileId","destroy","readField","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","read","l","h","readVarintRemainder","num","Boolean","decode","subarray","readUtf8TextDecoder","str","b1","b2","b3","b0","bytesPerSequence","String","fromCharCode","readUtf8","readBytes","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","min","set","finish","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","charCodeAt","writeUtf8","write","writeBytes","writeRawMessage","fn","obj","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","defaultOptions","filter","minZoom","maxZoom","maxDetailZoom","minDetailZoom","subdomains","zoomOffset","zoomReverse","GridLayer","m_super","getPrototypeOf","m_featureStyle","Util","split","vectorTileLayerStyles","style","zoom","getFeatureId","layerStyle","fId","m_featureTiles","m_map","m_zoom","updateZoom","getZoom","getSubdomain","tilePoint","index","clampZoom","getZoomForUrl","on","evt","tile","removeFeatureLayer","onAdd","rest","call","onRemove","off","createTile","done","featureTile","getTileUrl","VectorTile","exc","data","crs","infinite","_globalTileRange","max","template","setFeatureStyle","resetFeatureStyle","tileSize","_tileZoom","getZoomScale","addEventParent","removeEventParent","getBounds","idx","ignore","toLatLng","unproject","tileBounds","latLngBounds"],"mappings":"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"}